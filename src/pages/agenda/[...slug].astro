---
import { contentfulClient } from "../../lib/contentful";
import { documentToHtmlString } from "@contentful/rich-text-html-renderer";
import type { TypeEventSkeleton } from "../../lib/contentful";
import Layout from '../../layouts/ContentPage.astro';

export async function getStaticPaths() {
  const { items } = await contentfulClient.withoutUnresolvableLinks.getEntries<TypeEventSkeleton>({
    content_type: "events",
  });
  const pages = items.map((item) => ({
    params: { slug: item.fields.slug },
    props: {
      title: item.fields.title,
      body: documentToHtmlString(item.fields.body),
      coverImage: item.fields.coverImage
    },
  }));
  return pages;
}

const { body, title, coverImage } = Astro.props;
---
<Layout
	title={`Jardin de Champagne | ${title}/`}
	description="description"
>
<div style={ coverImage && coverImage.fields && coverImage.fields.file ? { backgroundImage:'url(' + coverImage.fields.file.url + ')' } : {}} class="header-section">
    <h1 class="header-title">{title}</h1>
</div>
    <article class="blog-section" set:html={body} />
  </body>
</html>
</Layout>

<style>
    .header-section {
        background-position: center;
    }
    .blog-section {
        padding: 50px;
    }
</style>